angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(o,e){t.currentUser=e,console.log("login heard",e,t.currentUser)})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc","$location",function(t,o,e){t.login=function(n,r){o.login(n,r).then(function(o){t.$emit("login",o),e.path("/")})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(t,o){console.log("PostsCtrl controller"),t.addPost=function(){t.postBody&&o.create({username:"gillyspy",body:t.postBody}).success(function(o){t.posts.unshift(o),t.postBody=null})},o.fetch().success(function(o){t.posts=o})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(o){return t.post("/api/posts",o)}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(t,o){t.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/posts",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"}).otherwise({redirectTo:"/"}),o.html5Mode(!0)}]),angular.module("app").service("UserSvc",["$http",function(t){var o=this;o.getUser=function(){return t.get("/api/users").then(function(t){return t.data})},o.login=function(e,n){return t.post("/api/sessions",{username:e,password:n}).then(function(e){return o.token=e.data,t.defaults.headers.common["X-Auth"]=e.data,o.getUser()})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJvdXRlcy5qcyIsInVzZXIuc3ZjLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJG9uIiwiXyIsInVzZXIiLCJjdXJyZW50VXNlciIsImNvbnNvbGUiLCJsb2ciLCJVc2VyU3ZjIiwiJGxvY2F0aW9uIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwidGhlbiIsIiRlbWl0IiwicGF0aCIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInN1Y2Nlc3MiLCJwb3N0IiwicG9zdHMiLCJ1bnNoaWZ0IiwiZmV0Y2giLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwiZ2V0IiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJodG1sNU1vZGUiLCJzdmMiLCJnZXRVc2VyIiwicmVzcG9uc2UiLCJkYXRhIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iXSwibWFwcGluZ3MiOiJBQUNBQSxRQUFBQyxPQUFBLE9BQ0EsWUNGQUQsUUFBQUMsT0FBQSxPQUNBQyxXQUFBLG1CQUFBLFNBQUEsU0FBQUMsR0FDQUEsRUFBQUMsSUFBQSxRQUFBLFNBQUFDLEVBQUFDLEdBR0FILEVBQUFJLFlBQUFELEVBQ0FFLFFBQUFDLElBQUEsY0FBQUgsRUFBQUgsRUFBQUksa0JDTkFQLFFBQUFDLE9BQUEsT0FDQUMsV0FBQSxhQUFBLFNBQUEsVUFBQSxZQUFBLFNBQUFDLEVBQUFPLEVBQUFDLEdBQ0FSLEVBQUFTLE1BQUEsU0FBQUMsRUFBQUMsR0FDQUosRUFDQUUsTUFBQUMsRUFBQUMsR0FDQUMsS0FBQSxTQUFBVCxHQUVBSCxFQUFBYSxNQUFBLFFBQUFWLEdBQ0FLLEVBQUFNLEtBQUEsV0NQQWpCLFFBQ0FDLE9BQUEsT0FDQUMsV0FBQSxhQUFBLFNBQUEsV0FBQSxTQUFBQyxFQUFBZSxHQUNBVixRQUFBQyxJQUFBLHdCQUVBTixFQUFBZ0IsUUFBQSxXQUNBaEIsRUFBQWlCLFVBQ0FGLEVBQUFHLFFBQ0FSLFNBQUEsV0FDQVMsS0FBQW5CLEVBQUFpQixXQUNBRyxRQUFBLFNBQUFDLEdBQ0FyQixFQUFBc0IsTUFBQUMsUUFBQUYsR0FDQXJCLEVBQUFpQixTQUFBLFFBT0FGLEVBQUFTLFFBQ0FKLFFBQUEsU0FBQUUsR0FDQXRCLEVBQUFzQixNQUFBQSxPQ3JCQXpCLFFBQUFDLE9BQUEsT0FDQTJCLFFBQUEsWUFBQSxRQUFBLFNBQUFDLEdBR0FDLEtBQUFILE1BQUEsV0FDQSxNQUFBRSxHQUFBRSxJQUFBLGVBSUFELEtBQUFULE9BQUEsU0FBQUcsR0FDQSxNQUFBSyxHQUFBTCxLQUFBLGFBQUFBLE9DWEF4QixRQUFBQyxPQUFBLE9BQ0ErQixRQUVBLGlCQUNBLG9CQUNBLFNBQUFDLEVBQUFDLEdBR0FELEVBQ0FFLEtBQUEsS0FDQWpDLFdBQUEsWUFDQWtDLFlBQUEsZUFFQUQsS0FBQSxVQUNBakMsV0FBQSxZQUNBa0MsWUFBQSxlQUdBRCxLQUFBLGFBQ0FqQyxXQUFBLGVBQ0FrQyxZQUFBLGtCQUVBRCxLQUFBLFVBQ0FqQyxXQUFBLFlBQ0FrQyxZQUFBLGVBR0FDLFdBQ0FDLFdBQUEsTUFLQUosRUFBQUssV0FBQSxNQ2pDQXZDLFFBQUFDLE9BQUEsT0FDQTJCLFFBQUEsV0FBQSxRQUFBLFNBQUFDLEdBQ0EsR0FBQVcsR0FBQVYsSUFDQVUsR0FBQUMsUUFBQSxXQUNBLE1BQUFaLEdBQUFFLElBQUEsY0FDQWhCLEtBQUEsU0FBQTJCLEdBQ0EsTUFBQUEsR0FBQUMsUUFJQUgsRUFBQTVCLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBZSxHQUFBTCxLQUFBLGlCQUNBWCxTQUFBQSxFQUNBQyxTQUFBQSxJQUVBQyxLQUFBLFNBQUEyQixHQUtBLE1BSkFGLEdBQUFJLE1BQUFGLEVBQUFDLEtBR0FkLEVBQUFnQixTQUFBQyxRQUFBQyxPQUFBLFVBQUFMLEVBQUFDLEtBQ0FILEVBQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vaW5zdGFudGlhdGUgdGhlIGRlY2xhcmVkIGFuZ3VsYXIgYXBwXG5hbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ1JvdXRlJ1xuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLiRvbignbG9naW4nLCBmdW5jdGlvbiAoXywgdXNlcikge1xuXG4gICAgICAgICAgICAvLyBvbiBsb2dpbiBnZXQgdGhlIGJ1YmJsZWQgdXAgdXNlciBcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9naW4gaGVhcmQnLCB1c2VyLCAkc2NvcGUuY3VycmVudFVzZXIpO1xuICAgICAgICB9KTtcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclN2YywgJGxvY2F0aW9uKSB7XG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIFVzZXJTdmNcbiAgICAgICAgICAgICAgICAubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKSAvL2xvZ2luIG5vdyByZXR1cm5zIHRoZSBkYXRhO1xuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1YmJsZSB1cCB0aGUgbG9nZ2VkIGluIHJlc3BvbnNlIGluZm8gKEFwcGxpY2F0aW9uIGNvbnRyb2xsZXIgd2lsbCBsaXN0ZW4gZm9yIGl0KVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcik7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSk7XG4iLCIvLyBjcmVhdGUgYSBjb250cm9sbGVyIGFuZCBpbmplY3Qgb3VyIHNlcnZpY2VcbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdQb3N0c0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQb3N0c1N2Yykge1xuICAgICAgICBjb25zb2xlLmxvZygnUG9zdHNDdHJsIGNvbnRyb2xsZXInKTtcblxuICAgICAgICAkc2NvcGUuYWRkUG9zdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUucG9zdEJvZHkpIHtcbiAgICAgICAgICAgICAgICBQb3N0c1N2Yy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJ2dpbGx5c3B5JyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogJHNjb3BlLnBvc3RCb2R5XG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMudW5zaGlmdChwb3N0KTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RCb2R5ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTsgLy8gc3VjY2Vzc1xuICAgICAgICAgICAgfSAvLyBlbmRpZjtcbiAgICAgICAgfSAvLyBlbmQgYWRkUG9zdDtcbiAgICAgICAgO1xuXG4gICAgICAgIC8vIHZpYSBBUEkgc2VydmljZVxuICAgICAgICBQb3N0c1N2Yy5mZXRjaCgpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMgPSBwb3N0cztcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcblxuICAgIH0pXG47IC8vIGVuZCBjb250cm9sbGVyXG5cbiIsIi8vIG5nIHNlcnZpY2UgZm9yIGxvYWRpbmcgcG9zdHNcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIC8vIGFkZCBhIGZldGNoIG1ldGhvZCB0byBvdXIgc2VydmljZVxuICAgICAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9wb3N0cycpO1xuICAgICAgICB9OyAvLyBmZXRjaDtcblxuICAgICAgICAvLyBhZGQgYSBjcmVhdGUgbWV0aG9kIHRvIG91ciBzZXJ2aWNlXG4gICAgICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Bvc3RzJywgcG9zdCk7XG4gICAgICAgIH07IC8vY3JlYXRlO1xuICAgICAgICBcbiAgICB9KTsvLyBzZXJ2aWNlKClcblxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAuY29uZmlnKFxuICAgICAgICBbXG4gICAgICAgICAgICAnJHJvdXRlUHJvdmlkZXInLFxuICAgICAgICAgICAgJyRsb2NhdGlvblByb3ZpZGVyJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblxuICAgICAgICAgICAgICAgIC8vcm91dGUgKGkuZS4gVVJMKSByb3V0aW5nIGxvZ2ljIG9uIGNsaWVudCBzaWRlXG4gICAgICAgICAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgICAgICAgICAgLndoZW4oJy8nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncG9zdHMuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgfSkgLy8gcm9vdFxuICAgICAgICAgICAgICAgICAgICAud2hlbignL3Bvc3RzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ3RybCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Bvc3RzLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgIH0pIC8vIHBvc3RcblxuICAgICAgICAgICAgICAgICAgICAud2hlbignL3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgIH0pIC8vIHJlZ2lzdGVyXG4gICAgICAgICAgICAgICAgICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbG9naW4uaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDsvLyBkZWZhdWx0IGlzIHJvb3RcblxuICAgICAgICAgICAgICAgIC8vaHRtbDUgbW9kZSBmb3IgaGFzaGxlc3MgVVJMc1xuICAgICAgICAgICAgICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICk7IC8vIGNvbmZpZztcbi8vbW9kdWxlIDtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgLnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgICAgICAgdmFyIHN2YyA9IHRoaXM7XG4gICAgICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc3ZjLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZjLnRva2VuID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCB1cCB0aGUgWC1hdXRoIHJlcXVlc3Qgb24gQUxMIHJlcXVlc3RzXG4gICAgICAgICAgICAgICAgICAgIC8vTk9URTogSSBkb24ndCB1bmRlcnN0YW5kIHlldCBob3cgdGhpcyBpcyByZWxldmFudCB0byBhbGwgcmVxdWVzdHMgeWV0XG4gICAgICAgICAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSlcbjsiXX0=
